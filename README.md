# Mavenix

Deterministic Maven builds using Nix?

## Install

First you need to install the [Nix package manager](https://nixos.org/nix/), if
you already haven't.

```sh
nix-env -i -f https://github.com/icetan/mavenix/archive/master.tar.gz
```

## Usage

### Create stub files

First we need to create some stub Nix expression files. `cd` into your maven
project directory and run:

```sh
mvnix-init
```

Follow the instructions displayed.

### Generate lock file

The `mvnix-update` script generates a `mavenix.lock` file:

```sh
mvnix-update
```

Note the `mvnix-update` script expects a `default.nix` that evaluates to the derivation,
just as is generated by `mvnix-init`. It is possible however to pass in a custom expression
in order to update the derivation. E.g., if the derivation is the attribute `pkgset.pkg`:

```sh
mvnix-update -E "(import ./. {}).pkgset.pkg"
```
